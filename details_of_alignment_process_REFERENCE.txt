
#####################################################################################
######################### SECTION ONE: GETTING THINGS READY #########################
#####################################################################################

# THIS TOOLKIT IS FOR FORCE-ALIGNING BANGLA SPEECH DATA VIA THE MONTREAL-FORCED-ALIGNER AT ITS CORE

# system requirements:
	- designed to work on Linux systems (tested on Linux Mint 22.1 which is based on Ubuntu 24.04)
	- Python3 must be installed before running the scripts (usually it comes pre-installed in recent Linux distros)
	- all commands need to be run from the terminal

# setting up bangla-align:
	- download zip file from: 
	- unzip the zip file
	- place the folder "bangla-align-main" inside Documents (or whereever you like)

# data preparation
	- audio files: 
		: only ".wav" format is supported (use only lowercase: e.g., avoid "audio.WAV"; use "audio.wav" or "AUDIO.wav")
		: the audio file does not need to be cleaned; that is, it can contain intervals that are not expected to be force-aligned; 
		: selective portions can be used for the alignment; this is done by transcripting only the portions of interest.
		
	- transcription textgrids: 
		: only Praat textgrids are supported as the transcription files, no other file types
		: annotate the audio files in Praat to create transcription textgrids
		: transcribe only the parts of the audio that are to be force-aligned; rest can be kept blank
		: use Avro to type in Bangla texts
		: be sure to check if the textgrids are saved in Unicode text; in Praat, this option can be checked/changed from the menu options: "Praat >> Preferences >> Text writing preferences..." >> UTF-8
		: if copying and pasting text from somewhere else, make sure there is no "newline" character at the end of any transcription interval 
		: see the sample transcription TGs for references 
		
# placement of the data files
	- place all the audio files and their corresponding transcription textgrids (bangla orthography) inside the folder "input_audio_and_transcription_tgs" (DO NOT change the name of this folder)
	- each audio file must have a corresponding transcription textgrid

# DO NOT DELETE/MODIFY THE FOLLOWING FOLDERS
	- "bangla_aligner"
	- "files_required_for_scripts"
	
# getting the terminal ready
	- open a new terminal on the linux machine
	- navigate to the folder "bangla-align-main*"
	- if it has been put inside Documents folder, typing "cd Documents/bangla-align-main" should take you there
	- the console prompt should show something like this: yourusername@computername: ~/Documents/bangla-align-main"$ (if you placed the aligner folder inside Documents)

# test your python3
    - type "python3 --version" in the console and hit Enter
    - if python3 is properly installed, it should should the version number  3.5.0 or later; otherwise, check/(re)install python3 on your system




#####################################################################################
###################### SECTION TWO: DOING ALIGNMENT (DEFAULT) #######################
#####################################################################################

# FINALLY, THE ACTUAL PROCESSING IN TWO STEPS
# STEP ONE: running scripts to create phoneme dictionary
    - type "bash Script_1_generate_dictionary.sh" and hit enter to run the script "generate_dictionary.sh"
	- running this script will do the following: 
		: it will create a phoneme dictionary named "temp_dict_bangla_ortho.dict" (which is required for the mfa aligner)
			- you should inspect all the entries in this file and hand-correct any faulty phonemes
		: if the textgrids contain any word that were not available in the aligner dictionary (which is very likely, given that it is a small dictionary at this moment), it will create a file named "oov_with_phoneme_suggestions.txt"; crucially, the aligner will create tentative entries to give you a headstart
			- hand-correct the entries carefully to include the 'correct pronunciations' of each word

# STEP TWO: running the mfa aligner and post-processing
	- go back to the terminal console; type "bash Script_2_mfa_align_and_postprocessing.sh" and hit Enter
    - the aligner now will take some time and give you the final output textgrids. 
	- contratulations!

######################### THE END #########################



